/*! For license information please see main.bundle.js.LICENSE.txt */
(()=>{var e,t={"./src/App.tsx":function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n("./node_modules/react/index.js")),i=r(n("./node_modules/react-dom/index.js")),a=n("./src/components/ReactApp.tsx");window.onload=function(){var e=document.getElementById("root");i.default.render(o.default.createElement(o.default.StrictMode,null,o.default.createElement(a.ReactApp,null)),e)}},"./src/components/ReactApp.tsx":function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n("./node_modules/react/index.js")),i=n("./src/components/SceneParams.tsx"),a=n("./src/components/UIButtonBlock.tsx"),s=n("./src/utils/RTEventBridge.ts"),c=n("./src/gfx/WorldContainer.ts"),u=o.createContext(null);t.ReactApp=function(){var e=o.useState(null),t=e[0],n=e[1],r=o.useState(null),d=r[0],l=r[1],f=o.useState(16733525),p=f[0],h=f[1],v=o.useState(0),m=v[0],x=v[1],g=o.useState([0,0,0]),E=g[0],b=g[1],w=o.useCallback((function(e){x(e.frame)}),[]),_=o.useCallback((function(e){b([e.x,e.y,e.z])}),[]);return o.useEffect((function(){var e=new s.RTEventBridge,t=new c.WorldContainer(e);n(t),l(e),e.onGfxEvent("FrameUpdate",w),e.onGfxEvent("CameraPositionUpdate",_)}),[w,_]),o.useEffect((function(){t&&d.dispatchToGfx("SetColor",{color:p})}),[t,p]),o.default.createElement(u.Provider,{value:t},o.default.createElement("div",{className:"container"},o.default.createElement(a.UIButtonBlock,{setColor:h}),o.default.createElement(a.Button,{onClick:function(){d.removeGfxEventListener("FrameUpdate",w)}},"Pause frame update"),o.default.createElement(a.Button,{onClick:function(){d.onGfxEvent("FrameUpdate",w)}},"Resume frame update"),o.default.createElement(i.SceneParams,{frame:m,cameraPosition:E}),o.default.createElement("canvas",{id:"renderport"})))}},"./src/components/SceneParams.tsx":function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n("./node_modules/react/index.js"));t.SceneParams=function(e){var t=e.frame,n=e.cameraPosition;return o.default.createElement(o.default.Fragment,null,o.default.createElement("div",null,"Frame ",t,o.default.createElement("br",null),"Camera pos x: ",n[0].toFixed(2)," y: ",n[1].toFixed(2)," z: ",n[2].toFixed(2)))}},"./src/components/UIButtonBlock.tsx":function(e,t,n){"use strict";var r=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i,a=o(n("./node_modules/react/index.js")),s=o(n("./node_modules/styled-components/dist/styled-components.browser.esm.js")),c={blue:{default:"#3f51b5",hover:"#283593"},pink:{default:"#e91e63",hover:"#ad1457"}};t.Button=s.default.button(i||(i=r(["\n    background-color: ",";\n    color: white;\n    padding: 5px 15px;\n    border-radius: 5px;\n    outline: 0;\n    text-transform: uppercase;\n    margin: 10px 0px;\n    cursor: pointer;\n    box-shadow: 0px 2px 2px lightgray;\n    transition: ease background-color 250ms;\n    &:hover {\n        background-color: ",";\n    }\n    &:disabled {\n        cursor: default;\n        opacity: 0.7;\n    }\n"],["\n    background-color: ",";\n    color: white;\n    padding: 5px 15px;\n    border-radius: 5px;\n    outline: 0;\n    text-transform: uppercase;\n    margin: 10px 0px;\n    cursor: pointer;\n    box-shadow: 0px 2px 2px lightgray;\n    transition: ease background-color 250ms;\n    &:hover {\n        background-color: ",";\n    }\n    &:disabled {\n        cursor: default;\n        opacity: 0.7;\n    }\n"])),(function(e){return c[e.theme].default}),(function(e){return c[e.theme].hover})),t.Button.defaultProps={theme:"blue"},t.UIButtonBlock=function(e){var n=e.setColor,r=[16711680,65280,255];return a.default.createElement(a.default.Fragment,null,a.default.createElement(t.Button,{onClick:function(){n(16711680)}},"Red"),a.default.createElement(t.Button,{onClick:function(){n(65280)}},"Green"),a.default.createElement(t.Button,{onClick:function(){n(r[Math.floor(Math.random()*r.length)])}},"Random"))}},"./src/gfx/WorldContainer.ts":(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/three/src/Three.js"),o=n("./node_modules/three-stdlib/index.js"),i=n("./src/utils/RTEventBridge.ts"),a=function(){function e(e){var t=this;this.prevRenderTime=0,this.clock=new r.Clock,this.rtBridge=new i.RTEventBridge,this.updateBoxColor=function(e){t.box.material.color.set(e.color)},this.onResize=function(){t.camera.aspect=window.innerWidth/window.innerHeight,t.camera.updateProjectionMatrix(),t.renderer.setSize(window.innerWidth,window.innerHeight)},this.loop=function(){requestAnimationFrame(t.loop);var e=t.clock.getDelta();t.rtBridge.processEvents(),t.animate(e),t.renderer.render(t.scene,t.camera)},this.rtBridge=e,this.init()}return e.prototype.init=function(){this.renderer=new r.WebGLRenderer({canvas:document.querySelector("#renderport")}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(window.innerWidth,window.innerHeight),this.camera=new r.PerspectiveCamera(60,1920/1080,1,1e3),this.camera.position.set(5,3,5);var e=new o.OrbitControls(this.camera,this.renderer.domElement);e.target.set(0,0,0),e.update(),this.scene=new r.Scene,this.scene.background=new r.Color(1,1,1);var t=new r.AmbientLight(16777215,.2);this.scene.add(t);var n=new r.SpotLight(16746632,.9,15);n.position.copy(this.camera.position),this.scene.add(n);var i=new r.MeshPhongMaterial({color:16711680}),a=new r.BoxGeometry(2,2,2),s=new r.Mesh(a,i);s.position.set(0,0,0),this.scene.add(s),this.box=s,window.addEventListener("resize",this.onResize),this.rtBridge.onReactEvent("SetColor",this.updateBoxColor),this.onResize(),this.loop()},e.prototype.animate=function(e){this.box.rotation.x+=e,this.box.rotation.z+=1.3*e,this.rtBridge.dispatchToReact("CameraPositionUpdate",{x:this.camera.position.x,y:this.camera.position.y,z:this.camera.position.z}),this.rtBridge.dispatchToReact("FrameUpdate",{frame:this.renderer.info.render.frame})},e}();t.WorldContainer=a},"./src/utils/RTEventBridge.ts":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.reactEventsQueue=new Map,this.reactEventListeners=new Map,this.gfxEventsQueue=new Map,this.gfxEventListeners=new Map}return e.prototype.clear=function(){this.reactEventsQueue.clear(),this.reactEventListeners.clear(),this.gfxEventsQueue.clear(),this.gfxEventListeners.clear()},e.prototype.onReactEvent=function(e,t){var n=this.reactEventListeners.get(e);n||(n=new Set,this.reactEventListeners.set(e,n)),n.add(t)},e.prototype.removeReactEventListener=function(e,t){var n=this.reactEventListeners.get(e);n&&(n.delete(t),n.size||this.gfxEventListeners.delete(e))},e.prototype.dispatchToGfx=function(e,t){var n=this.reactEventsQueue.get(e);n||(n=new Set,this.reactEventsQueue.set(e,n)),n.add(t)},e.prototype.onGfxEvent=function(e,t){var n=this.gfxEventListeners.get(e);n||(n=new Set,this.gfxEventListeners.set(e,n)),n.add(t)},e.prototype.removeGfxEventListener=function(e,t){var n=this.gfxEventListeners.get(e);n&&(n.delete(t),n.size||this.gfxEventListeners.delete(e))},e.prototype.dispatchToReact=function(e,t){var n=this.gfxEventsQueue.get(e);n||(n=new Set,this.gfxEventsQueue.set(e,n)),n.add(t)},e.prototype.processEvents=function(){var e=this;this.gfxEventsQueue.forEach((function(t,n){var r=e.gfxEventListeners.get(n);r&&r.size&&t.forEach((function(e){r.forEach((function(t){t(e)}))}))})),this.gfxEventsQueue.clear(),this.reactEventsQueue.forEach((function(t,n){var r=e.reactEventListeners.get(n);r&&r.size&&t.forEach((function(e){r.forEach((function(t){t(e)}))}))})),this.reactEventsQueue.clear()},e}();t.RTEventBridge=n},"?4db5":()=>{}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var i=n[e]={id:e,loaded:!1,exports:{}};return t[e].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}r.m=t,e=[],r.O=(t,n,o,i)=>{if(!n){var a=1/0;for(d=0;d<e.length;d++){for(var[n,o,i]=e[d],s=!0,c=0;c<n.length;c++)(!1&i||a>=i)&&Object.keys(r.O).every((e=>r.O[e](n[c])))?n.splice(c--,1):(s=!1,i<a&&(a=i));if(s){e.splice(d--,1);var u=o();void 0!==u&&(t=u)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[n,o,i]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={main:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var o,i,[a,s,c]=n,u=0;if(a.some((t=>0!==e[t]))){for(o in s)r.o(s,o)&&(r.m[o]=s[o]);if(c)var d=c(r)}for(t&&t(n);u<a.length;u++)i=a[u],r.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return r.O(d)},n=self.webpackChunkreact_to_three_bridge=self.webpackChunkreact_to_three_bridge||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),r.nc=void 0;var o=r.O(void 0,["vendor"],(()=>r("./src/App.tsx")));o=r.O(o)})();
//# sourceMappingURL=main.js.map